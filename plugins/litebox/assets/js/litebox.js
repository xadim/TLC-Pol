//	LiteBox v1.1, Copyright 2014, Joe Mottershaw, https://github.com/joemottershaw/
//	===============================================================================

	!function(e,t){function o(t,o){this.element=t,this.$element=e(this.element),this.options=e.extend({},a,o),this._defaults=a,this._name=l,this.init()}function i(){return t.innerHeight?t.innerHeight:e(t).height()}function n(t){e(t).each(function(){var t=new Image;t.src=this,t.width>0&&e("<img />").attr("src",this).addClass("litebox-preload").appendTo("body").hide()})}var l="liteBox",a={revealSpeed:400,overlayClose:!0,escKey:!0,navKey:!0,callbackInit:function(){},callbackBeforeOpen:function(){},callbackAfterOpen:function(){},callbackBeforeClose:function(){},callbackAfterClose:function(){},callbackError:function(){},callbackPrev:function(){},callbackNext:function(){},errorMessage:"Error loading content."};o.prototype={init:function(){var t=this;this.$element.on("click",function(e){e.preventDefault(),t.openLitebox()}),keyEsc=27,keyLeft=37,keyRight=39,e("body").off("keyup").on("keyup",function(o){t.options.escKey&&o.keyCode==keyEsc&&t.closeLitebox(),t.options.navKey&&o.keyCode==keyLeft&&e(".litebox-prev").trigger("click"),t.options.navKey&&o.keyCode==keyRight&&e(".litebox-next").trigger("click")}),this.options.callbackInit.call(this)},openLitebox:function(){var t=this;this.options.callbackBeforeOpen.call(this),t.buildLitebox();var o=this.$element;if(t.populateLitebox(o),t.buildIndicator(o),t.options.overlayClose&&$litebox.on("click",function(o){(o.target===this||e(o.target).hasClass("litebox-container")||e(o.target).hasClass("litebox-error"))&&t.closeLitebox()}),$close.on("click",function(){t.closeLitebox()}),this.$element.attr("data-litebox-group")){var t=this,i=this.$element.attr("data-litebox-group"),l=e('[data-litebox-group="'+this.$element.attr("data-litebox-group")+'"]'),a=[];e('[data-litebox-group="'+i+'"]').each(function(){var t=e(this).attr("href");a.push(t)}),n(a),e(".litebox-nav").show(),$prevNav.off("click").on("click",function(){t.options.callbackPrev.call(this);if(t.$element.attr('data-indicator')){l2=e('.litebox-indicators').find('.indicator-active').prev().attr('data-src2');e('.litebox-indicators').find('.indicator-active').removeClass('indicator-active').prev().addClass('indicator-active');if(!l2){l2=e('.litebox-indicator').last().attr('data-src2');e('.litebox-indicator').last().addClass('indicator-active')}lk=e('<a/>').attr('href',l2);t.populateLitebox(lk)}{var i=l.index(o);o=l.eq(i-1),e(o).length||(o=l.last()),tp=o.attr('data-top');rt=o.attr('data-right');bm=o.attr('data-bottom');lt=o.attr('data-left');cr=e('.litebox-container').css({'position':'absolute','top':tp,'right':rt,'bottom':bm,'left':lt,'overflow':'hidden','overflow-y':'none'});ht=cr.height();e('.litebox-container').css({'line-height':ht+'px'});var ca=o.attr('data-colopa');$litebox.css({'background-color':ca});t.populateLitebox(o)}}),$nextNav.off("click").on("click",function(){t.options.callbackNext.call(this);if(t.$element.attr('data-indicator')){l2=e('.litebox-indicators').find('.indicator-active').next().attr('data-src2');e('.litebox-indicators').find('.indicator-active').removeClass('indicator-active').next().addClass('indicator-active');if(!l2){l2=e('.litebox-indicators li').first().attr('data-src2');e('.litebox-indicators li').first().addClass('indicator-active')}lk=e('<a/>').attr('href',l2);t.populateLitebox(lk)}else{var i=l.index(o);o=l.eq(i+1),e(o).length||(o=l.first()),tp=o.attr('data-top');rt=o.attr('data-right');bm=o.attr('data-bottom');lt=o.attr('data-left');cr=e('.litebox-container').css({'position':'absolute','top':tp,'right':rt,'bottom':bm,'left':lt,'overflow':'hidden','overflow-y':'none'});ht=cr.height();e('.litebox-container').css({'line-height':ht+'px'});var ca=o.attr('data-colopa');$litebox.css({'background-color':ca});t.populateLitebox(o)}})}setTimeout(this.options.callbackAfterOpen,this.options.revealSpeed+200)},buildLitebox:function(){var l2=this.$element;tp=l2.attr('data-top');rt=l2.attr('data-right');bm=l2.attr('data-bottom');lt=l2.attr('data-left');ca=l2.attr('data-colopa');$litebox=e("<div>",{"class":"litebox-overlay"}),$close=e("<div>",{"class":"litebox-close"}),$error=e('<div class="litebox-error"><span>'+this.options.errorMessage+"</span></div>"),$prevNav=e("<div>",{"class":"litebox-nav litebox-prev"}),$nextNav=e("<div>",{"class":"litebox-nav litebox-next"}),$container=e("<div>",{"class":"litebox-container"}).css({'position':'absolute','top':tp,'right':rt,'bottom':bm,'left':lt,'overflow':'hidden','overflow-y':'none'}),$loader=e("<div>",{"class":"litebox-loader"}),e("body").prepend($litebox.css({"background-color":ca})),$litebox.append($close,$prevNav,$nextNav,$container),$litebox.fadeIn(this.options.revealSpeed)},buildIndicator:function(link){if((this.$element.attr('data-litebox-group'))&&(this.$element.attr('data-indicator'))){ge=this.$element.attr('data-litebox-group'),iy=[];$('[data-litebox-group="'+ge+'"]').each(function(){var sc=$(this).attr('href');if(sc.match(/\.(jpeg|jpg|gif|png|bmp)/i)!==null){iy.push(sc)}});var ct=$('<ol>',{'class':'litebox-indicators'});$.each(iy,function(i){var $li=e('<li/>').addClass('litebox-indicator').css({'background':'url("'+iy[i]+'")'}).attr('data-src2',iy[i]).appendTo(ct);$li.off('click').on('click',function(){lk=$('<a/>').attr('href',iy[i]);$t.populateLitebox(lk);e(this).siblings('.indicator-active').removeClass('indicator-active');e(this).addClass('indicator-active')})});$container.append(ct);var te=$container.find('.litebox-content').attr('src');e(".litebox-indicators li").each(function(i,li){if(te==$(li).attr('data-src2')){e(li).addClass('indicator-active')}})}},populateLitebox:function(t){var o=this,i=t.attr("href"),n=e(".litebox-content");ir=t.attr('data-incolor');if($litebox.append($loader),null!==i.match(/\.(jpeg|jpg|gif|png|bmp)/i)){var l=e("<img>",{src:i,"class":"litebox-content"});o.transitionContent("image",n,l),e("img.litebox-content").imagesLoaded(function(){$loader.remove()}),l.error(function(){o.liteboxError(),$loader.remove()})}else if(videoURL=i.match(/(youtube|youtu|vimeo|dailymotion|kickstarter|hulu|ustream|viddler|animoto|nfb|screenr|funnyordie|ted|coub|blip|ora|aol|collegehumor|jest|rdio|mixcloud|soundcloud|dotsub|chirb)/)){var a=t.attr('data-src');var c=e("<iframe>",{src:a,frameborder:"0",vspace:"0",hspace:"0",scrolling:"no",allowfullscreen:"","class":"litebox-content",style:"background: #000"});o.transitionContent("embed",n,c),c.load(function(){$loader.remove()})}else if("#"==i.substring(0,1)){hd=t.attr('data-inhead');ifr=t.attr('data-infcolor');iy=t.attr('data-inffamily');if(e(i).length){$html=e("<div>",{"class":"litebox-content litebox-inline-html"}).css({'background':ir});$hd=e('<h2>'+hd+'</h2>').addClass('litebox-header').css({'font-family':iy});$html.append($hd);$dv=e('<div>',{'class':'scroll'}).addClass('litebox-scroll2');$cn=($(i).clone());$dv.append($cn);$html.append($dv).css({'color':ifr,'font-family':iy});o.transitionContent("inline",n,$html);h1=e('.litebox-container').height();h2=e('.litebox-content').height();h=h2-61;if(h2>h1){h=h1-81};e('.scroll').css({'height':h})}else{o.liteboxError()}$loader.remove()}else{var c=e("<iframe>",{src:i,frameborder:"0",vspace:"0",hspace:"0",scrolling:"auto","class":"litebox-content",allowfullscreen:""});o.transitionContent("iframe",n,c),c.load(function(){$loader.remove()})}},transitionContent:function(o,i,n){var l=this;"inline"!=o&&$container.removeClass("litebox-scroll"),i.remove(),$container.append(n),l.centerContent(),e(t).on("resize",function(){l.centerContent()})},centerContent:function(){$litebox.css({height:i()}),$container.css({"line-height":$container.height()+"px"}),"undefined"!=typeof $html&&e(".litebox-inline-html").outerHeight()<$container.height()&&e(".litebox-inline-html").css({"margin-top":"-"+e(".litebox-inline-html").outerHeight()/2+"px",top:"50%"})},closeLitebox:function(){this.options.callbackBeforeClose.call(this),$litebox.fadeOut(this.options.revealSpeed,function(){e(".litebox-nav").hide(),$litebox.empty().remove(),e(".litebox-preload").remove()}),e(".litebox-prev").off("click"),e(".litebox-next").off("click"),setTimeout(this.options.callbackAfterClose,this.options.revealSpeed+200)},liteboxError:function(){this.options.callbackError.call(this),$container.append($error)}},e.fn[l]=function(t){return this.each(function(){e.data(this,l)||e.data(this,l,new o(this,t))})}}(jQuery,window,document);